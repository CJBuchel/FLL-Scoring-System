steps:
  # Init
  - displayName: Git Initializing
  - script: git submodule update --init --recursive
  - script: git submodule update --remote --recursive -f

  # Rust install
  - task: Rustup@1
    inputs:
      rustupCommand: 'target install x86_64-unknown-linux-musl'
      verbose: false

  - task: Cargo@1
    inputs:
      cargoCommand: 'build'
      cargoWorkingDir: './server'
      verbose: false

  # Install flutter
  # - task: FlutterInstall@0
  #   inputs:
  #     mode: 'auto'
  #     channel: 'stable'
  #     version: 'custom'
  #     customVersion: '2.19.5'